"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var api_config_1=require("./api.config"),bodyParser=require("body-parser"),express=require("express"),fs=require("fs"),path=require("path"),ServerConfig;!function(e){var r=express(),t=(express.Router(),JSON.parse(fs.readFileSync(path.join(__dirname,"../config/server.config.json"),"utf8")));r.use(bodyParser.json()),r.use(bodyParser.urlencoded({extended:!0})),r.set("port",t.api.port);var n=function(){function e(){this.enable_cors(),this.api_setup(),this.server_start()}return e.createInstance=function(){return null!=this._instance&&void 0!=this._instance||(this._instance=new e),this._instance},e.prototype.enable_cors=function(){r.use(function(e,r,t){r.header("Access-Control-Allow-Origin","*"),r.header("Access-Control-Allow-Headers","Origin, X-Requested-With, Content-Type, Accept"),t()})},e.prototype.api_setup=function(){var e=path.join(__dirname,"").split(path.sep).pop().concat("/controllers");(new api_config_1.ApiRouter.ApiConfig).configRoutes(r,e)},e.prototype.server_start=function(){r.listen(r.get("port"),function(){console.log("Server starts at port "+r.get("port")+".")})},e._instance=null,e}();e.ServerSetup=n}(ServerConfig=exports.ServerConfig||(exports.ServerConfig={})),ServerConfig.ServerSetup.createInstance();